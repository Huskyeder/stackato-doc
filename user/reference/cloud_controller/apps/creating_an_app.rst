
Creating an app
---------------


POST /v2/apps/
~~~~~~~~~~~~~~


Fields
~~~~~~

.. cssclass:: fields table-striped table-bordered table-condensed


+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| Name                 | Description                                                                                                                                                                        | Default                        | Valid Values | Example Values                                                |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+======================+====================================================================================================================================================================================+================================+==============+===============================================================+
| guid                 | The guid of the app.                                                                                                                                                               |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| name                 | The name of the app.                                                                                                                                                               |                                |              | - my-super-app                                                |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| memory               | The amount of memory each instance should have. In megabytes.                                                                                                                      |                                |              | - 1024                                                        |
|                      |                                                                                                                                                                                    |                                |              | - 512                                                         |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| instances            | The number of instances of the app to run. To ensure optimal availability, ensure there are at least 2 instances.                                                                  |                                |              | - 2                                                           |
|                      |                                                                                                                                                                                    |                                |              | - 6                                                           |
|                      |                                                                                                                                                                                    |                                |              | - 10                                                          |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| disk_quota           | The maximum amount of disk available to an instance of an app. In megabytes.                                                                                                       |                                |              | - 1204                                                        |
|                      |                                                                                                                                                                                    |                                |              | - 2048                                                        |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| space_guid           | The guid of the associated space.                                                                                                                                                  |                                |              | - guid-b9a2bd90-946b-472c-922a-39a65fdee0c6                   |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| stack_guid           | The guid of the associated stack.                                                                                                                                                  | Uses the default system stack. |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| state                | The current desired state of the app. One of STOPPED or STARTED.                                                                                                                   | STOPPED                        | - STOPPED    |                                                               |
|                      |                                                                                                                                                                                    |                                | - STARTED    |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| command              | The command to start an app after it is staged (e.g. 'rails s -p $PORT' or 'java com.org.Server $PORT').                                                                           |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| buildpack            | Buildpack to build the app. 3 options: a) Blank means autodetection; b) A Git Url pointing to a buildpack; c) Name of an installed buildpack.                                      |                                |              | - https://github.com/virtualstaticvoid/heroku-buildpack-r.git |
|                      |                                                                                                                                                                                    |                                |              | - an_example_installed_buildpack                              |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| health_check_timeout | Timeout for health checking of an staged app when starting up                                                                                                                      |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| environment_json     | Key/value pairs of all the environment variables to run in your app. Does not include any system or service variables.                                                             |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| detected_buildpack   | The autodetected buildpack that was run.                                                                                                                                           |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| space_url            | The url of the associated space.                                                                                                                                                   |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| stack_url            | The url of the associated stack.                                                                                                                                                   |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| service_bindings_url | The url of all the associated service bindings.                                                                                                                                    |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| routes_url           | The url of all the associated routes.                                                                                                                                              |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| events_url           | The url of all the associated events.                                                                                                                                              |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| production           | Deprecated.                                                                                                                                                                        | true                           | - true       |                                                               |
|                      |                                                                                                                                                                                    |                                | - false      |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| console              | Open the console port for the app (at $CONSOLE_PORT).                                                                                                                              | false                          | - true       |                                                               |
|                      |                                                                                                                                                                                    |                                | - false      |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| debug                | Open the debug port for the app (at $DEBUG_PORT).                                                                                                                                  | false                          | - true       |                                                               |
|                      |                                                                                                                                                                                    |                                | - false      |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| package_state        | The current desired state of the package. One of PENDING, STAGED or FAILED.                                                                                                        |                                | - PENDING    |                                                               |
|                      |                                                                                                                                                                                    |                                | - STAGED     |                                                               |
|                      |                                                                                                                                                                                    |                                | - FAILED     |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+
| system_env_json      | environment_json for system variables, contains vcap_services by default, a hash containing key/value pairs of the names and information of the services associated with your app. |                                |              |                                                               |
|                      |                                                                                                                                                                                    |                                |              |                                                               |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------+--------------+---------------------------------------------------------------+


Request
~~~~~~~


Headers
^^^^^^^

::

  Authorization: bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoidWFhLWlkLTEwMCIsImVtYWlsIjoiZW1haWwtODJAc29tZWRvbWFpbi5jb20iLCJzY29wZSI6WyJjbG91ZF9jb250cm9sbGVyLmFkbWluIl0sImF1ZCI6WyJjbG91ZF9jb250cm9sbGVyIl0sImV4cCI6MTQwMzgyODM0NH0.ctrVDpLrjjN-_hFRr2ubqBGuWizo_smNF1GyfBGk_uU
  Host: example.org
  Content-Type: application/x-www-form-urlencoded
  Cookie:


Route
^^^^^

::

  POST /v2/apps


Body
^^^^

::

  {"name":"my-super-app","memory":1024,"instances":2,"disk_quota":1204,"space_guid":"guid-b9a2bd90-946b-472c-922a-39a65fdee0c6","space_guid":"118a2ab9-708f-4ee6-9125-c3fe1c9c83d7"}


cURL
^^^^

::

  curl "https://api.[your-domain.com]/v2/apps" -d '{"name":"my-super-app","memory":1024,"instances":2,"disk_quota":1204,"space_guid":"guid-b9a2bd90-946b-472c-922a-39a65fdee0c6","space_guid":"118a2ab9-708f-4ee6-9125-c3fe1c9c83d7"}' -X POST \
  	-H "Authorization: bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoidWFhLWlkLTEwMCIsImVtYWlsIjoiZW1haWwtODJAc29tZWRvbWFpbi5jb20iLCJzY29wZSI6WyJjbG91ZF9jb250cm9sbGVyLmFkbWluIl0sImF1ZCI6WyJjbG91ZF9jb250cm9sbGVyIl0sImV4cCI6MTQwMzgyODM0NH0.ctrVDpLrjjN-_hFRr2ubqBGuWizo_smNF1GyfBGk_uU" \
  	-H "Host: example.org" \
  	-H "Content-Type: application/x-www-form-urlencoded" \
  	-H "Cookie: "


Response
~~~~~~~~


Headers
^^^^^^^

::

  Content-Type: application/json;charset=utf-8
  Location: /v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9
  X-VCAP-Request-ID: 7991fed6-6772-43f9-ae09-8d0214e8d826
  Content-Length: 1641
  X-Content-Type-Options: nosniff


Status
^^^^^^

::

  201 Created


Body
^^^^

::

  {
    "metadata": {
      "guid": "97c6f16f-74e8-4f3d-b17b-c5bb0270eda9",
      "url": "/v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9",
      "created_at": "2014-06-19T17:19:04-07:00",
      "updated_at": null
    },
    "entity": {
      "guid": "97c6f16f-74e8-4f3d-b17b-c5bb0270eda9",
      "name": "my-super-app",
      "production": false,
      "space_guid": "118a2ab9-708f-4ee6-9125-c3fe1c9c83d7",
      "stack_guid": "36892c55-02f7-49bd-b181-57a810586a2e",
      "buildpack": null,
      "detected_buildpack": null,
      "environment_json": {
  
      },
      "memory": 1024,
      "instances": 2,
      "disk_quota": 1204,
      "state": "STOPPED",
      "version": "e26d72d3-ffde-4563-aae8-8418f2682298",
      "command": null,
      "console": false,
      "debug": null,
      "staging_task_id": null,
      "package_state": "PENDING",
      "health_check_timeout": null,
      "system_env_json": {
        "VCAP_SERVICES": {
  
        }
      },
      "distribution_zone": "default",
      "description": "",
      "sso_enabled": false,
      "restart_required": false,
      "autoscale_enabled": false,
      "min_cpu_threshold": 20,
      "max_cpu_threshold": 80,
      "min_instances": 1,
      "max_instances": 2,
      "droplet_count": 0,
      "space_url": "/v2/spaces/118a2ab9-708f-4ee6-9125-c3fe1c9c83d7",
      "stack_url": "/v2/stacks/36892c55-02f7-49bd-b181-57a810586a2e",
      "service_bindings_url": "/v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9/service_bindings",
      "routes_url": "/v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9/routes",
      "app_versions_url": "/v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9/app_versions",
      "events_url": "/v2/apps/97c6f16f-74e8-4f3d-b17b-c5bb0270eda9/events"
    }
  }


Audit Records Created By The Request
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


Audit Record: audit.app.create
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

.. cssclass:: fields table-striped table-bordered table-condensed


+-------------------+-------------------------------------------------------------+
| Attribute Name    | Value                                                       |
|                   |                                                             |
+===================+=============================================================+
| id                | 44                                                          |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| guid              | 77298004-8196-4340-b5d3-0e6b5a6cfd02                        |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| created_at        | 2014-06-19 17:19:04 -0700                                   |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| updated_at        |                                                             |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| timestamp         | 2014-06-19 17:19:04 -0700                                   |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| type              | audit.app.create                                            |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actor             | uaa-id-100                                                  |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actor_type        | user                                                        |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actee             | 97c6f16f-74e8-4f3d-b17b-c5bb0270eda9                        |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actee_type        | app                                                         |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| metadata          | ::                                                          |
|                   |                                                             |
|                   |   {                                                         |
|                   |     "request": {                                            |
|                   |       "name": "my-super-app",                               |
|                   |       "memory": 1024,                                       |
|                   |       "instances": 2,                                       |
|                   |       "disk_quota": 1204,                                   |
|                   |       "space_guid": "118a2ab9-708f-4ee6-9125-c3fe1c9c83d7", |
|                   |       "production": false,                                  |
|                   |       "environment_json": "PRIVATE DATA HIDDEN",            |
|                   |       "state": "STOPPED",                                   |
|                   |       "console": false,                                     |
|                   |       "distribution_zone": "default",                       |
|                   |       "description": "",                                    |
|                   |       "sso_enabled": false,                                 |
|                   |       "autoscale_enabled": false                            |
|                   |     }                                                       |
|                   |   }                                                         |
|                   |                                                             |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| space_id          | 99                                                          |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| organization_guid | e679996a-881a-464b-aa4f-22c775a590d4                        |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| space_guid        | 118a2ab9-708f-4ee6-9125-c3fe1c9c83d7                        |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actor_name        | email-82@somedomain.com                                     |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+
| actee_name        | my-super-app                                                |
|                   |                                                             |
+-------------------+-------------------------------------------------------------+

